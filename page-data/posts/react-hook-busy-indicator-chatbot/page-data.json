{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/react-hook-busy-indicator-chatbot","result":{"data":{"markdownRemark":{"id":"fd30355e-b2e9-515c-8ea2-ba8fce28063b","html":"<p>During my work on <a href=\"https://theparadox.life/posts/rule-based-chatbot-from-scratch-using-reactjs-and-nodejs-p1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">chatbot application</a> there was a need for a busy indicator, when the user is waiting for the server response. </p>\n<p>The busy indicator I had in mind looked like where the blue dot will keep moving.</p>\n<p><img src=\"https://raw.githubusercontent.com/arunghosh/react-chat-busy-indicator/master/docs/react-chat-busy-indicator.png\" alt=\"Screenshot\"></p>\n<p>We can make this component without accepting much props. But I wanted to component to be more generic having the following props</p>\n<table>\n<thead>\n<tr>\n<th>Prop</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">active</code></td>\n<td>if <code class=\"language-text\">true</code> the indicator will be active</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">length</code></td>\n<td>number of dots</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">delay</code></td>\n<td>delay(ms) in the propagation of the active dot in the busy indicator</td>\n</tr>\n</tbody>\n</table>\n<p>Initially I thought it to be a complicated one, but ended up having a few lines of code without much complication.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">BusyIndicator</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> busy<span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> delay <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">,</span> setPosition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updatePosition</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pos</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>pos <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>busy <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>delay<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>updatePosition<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timerId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>delay<span class=\"token punctuation\">,</span> busy<span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>BusyItem key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span> current<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>position <span class=\"token operator\">===</span> index<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>BusyItem<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">BusyItem</code> is a <code class=\"language-text\">styled-component</code></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> BusyItem <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  height: 0.5rem;\n  width: 0.5rem;\n  border-radius: 50%;\n  background: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>current <span class=\"token operator\">?</span> <span class=\"token string\">\"#2980b9\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"#bdc3c7\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  margin: 0px 0.3rem 0px 0;\n  display: inline-block;\n  line-height: 0.6rem;\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>For complete source code <a href=\"https://github.com/arunghosh/react-chat-busy-indicator\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">check this repo</a>.</strong></p>\n<p><strong><a href=\"https://codesandbox.io/s/react-chatbot-busy-indicator-hy1fh?file=/src/BusyIndicator.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Click here for live demo</a>.</strong></p>","fields":{"slug":"/posts/react-hook-busy-indicator-chatbot","tagSlugs":["/tag/react/","/tag/busy-indicator/","/tag/chatbot/","/tag/react-hooks/"]},"frontmatter":{"date":"2020-05-07T22:40:32.169Z","description":"React busy indicator component for Chatbots using Hooks","tags":["React","Busy Indicator","Chatbot","React Hooks"],"title":"React Busy Indicator for Chatbots","socialImage":null}}},"pageContext":{"slug":"/posts/react-hook-busy-indicator-chatbot"}}}