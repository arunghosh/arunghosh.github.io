{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/what-why-and-how-of-docker-volumes","result":{"data":{"markdownRemark":{"id":"a547e7b5-b2f2-5b85-89c3-c6787fc8cede","html":"<p><em>NOTE: The purpose of this article is to give an quick overview(so not a detailed one) of docker volumes with some pointers.</em></p>\n<h3 id=\"prerequisite\" style=\"position:relative;\"><a href=\"#prerequisite\" aria-label=\"prerequisite permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisite</h3>\n<p><a href=\"https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/#sharing-promotes-smaller-images\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Read about Docker storage drivers</a></p>\n<h3 id=\"what-is-docker-volumes\" style=\"position:relative;\"><a href=\"#what-is-docker-volumes\" aria-label=\"what is docker volumes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Docker Volumes?</h3>\n<p>Docker volumes is a mechanism for persisting data generated by and used by Docker containers. In a more technical way, volumes are directories that are outside of the default <a href=\"https://en.wikipedia.org/wiki/UnionFS\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Union File System</a> and exist as normal directories and files in the host filesystem.</p>\n<h3 id=\"why-what-are-the-use-cases\" style=\"position:relative;\"><a href=\"#why-what-are-the-use-cases\" aria-label=\"why what are the use cases permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why? What are the use cases?</h3>\n<ol>\n<li>Log files and databases need to persist even when the container is removed.</li>\n<li>For sharing data across the containers.</li>\n</ol>\n<p>So if you donâ€™t use volumes(or <a href=\"https://docs.docker.com/engine/admin/volumes/bind-mounts/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bind mounts</a>) you many end up loosing valuable data along with your container.</p>\n<h3 id=\"how\" style=\"position:relative;\"><a href=\"#how\" aria-label=\"how permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How?</h3>\n<p>The docker volume works by mounting a container directory to the host filesystem. So all the reads and writes happens to the host filesystem and no the UFS. This makes it possible to persist data and share data.</p>\n<p>There are different ways to <a href=\"https://docs.docker.com/engine/admin/volumes/volumes/#choosing-the--v-or-mount-flag\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">specify volumes</a>(-v or -mount). In the <a href=\"https://docs.docker.com/compose/overview/#compose-documentation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">docker compose</a> file you can add volumes via following ways (this can change depending on the version of your docker compose file).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">volumes:\n  # Just specify a path and let the Engine create a volume\n  - /var/lib/mysql\n\n  # Specify an absolute path mapping\n  - /opt/data:/var/lib/mysql\n\n  # Path on the host, relative to the Compose file\n  - ./cache:/tmp/cache\n\n  # User-relative path\n  - ~/configs:/etc/configs/:ro\n\n  # Named volume\n  - datavolume:/var/lib/mysql</code></pre></div>\n<h3 id=\"further-reading\" style=\"position:relative;\"><a href=\"#further-reading\" aria-label=\"further reading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Further reading</h3>\n<ol>\n<li><a href=\"https://docs.docker.com/engine/admin/volumes/volumes/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.docker.com/engine/admin/volumes/volumes/</a></li>\n<li><a href=\"https://docs.docker.com/compose/compose-file/compose-file-v2/#volumes-volume_driver\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://docs.docker.com/compose/compose-file/compose-file-v2/#volumes-volume_driver</a></li>\n</ol>","fields":{"slug":"/posts/what-why-and-how-of-docker-volumes","tagSlugs":["/tag/docker/","/tag/devops/"]},"frontmatter":{"date":"2017-08-10T22:40:32.169Z","description":"The purpose of this article is to give an quick overview(so not a detailed one) of docker volumes with some pointers.","tags":["Docker","Devops"],"title":"What why and how of Docker Volumes","socialImage":null}}},"pageContext":{"slug":"/posts/what-why-and-how-of-docker-volumes"}}}